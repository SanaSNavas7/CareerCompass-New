{% extends "base.html" %}

{% block title %}Chatbot - Career Compass{% endblock %}

{% block content %}
<div class="bg-white p-8 rounded-lg shadow-xl max-w-2xl mx-auto">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Career Chatbot</h2>
    <div class="flex flex-col h-96 border border-gray-300 rounded-lg overflow-hidden mb-6">
        <div id="chat-window" class="flex-grow p-4 overflow-y-auto bg-gray-50">
            <!-- Chat messages will appear here -->
            <div class="flex justify-start mb-4">
                <div class="bg-blue-100 text-blue-800 p-3 rounded-lg max-w-[80%] shadow">
                    Hello! I'm your simple career guidance bot. How can I help you today?
                </div>
            </div>
            {% if response %}
                <div class="flex justify-end mb-4">
                    <div class="bg-gray-200 text-gray-800 p-3 rounded-lg max-w-[80%] shadow">
                        {{ user_query }}
                    </div>
                </div>
                <div class="flex justify-start mb-4">
                    <div class="bg-blue-100 text-blue-800 p-3 rounded-lg max-w-[80%] shadow">
                        {{ response }}
                    </div>
                </div>
            {% endif %}
        </div>
        <form action="{{ url_for('chatbot') }}" method="POST" class="p-4 border-t border-gray-300 flex">
            <input type="text" name="query" placeholder="Ask me anything about careers..."
                   class="flex-grow px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                   required>
            <button type="submit"
                    class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-r-md transition duration-300">
                Send
            </button>
        </form>
    </div>

    <div class="flex flex-wrap justify-center gap-4 mt-8">
        <a href="{{ url_for('upload') }}" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 transform hover:scale-105">
            Upload Resume
        </a>
        <a href="{{ url_for('career_recommendation') }}" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 transform hover:scale-105">
            Get Recommendations
        </a>
        <a href="{{ url_for('dashboard') }}" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300 transform hover:scale-105">
            Back to Dashboard
        </a>
    </div>
</div>

<script>
    // Scroll chat window to bottom on load
    document.addEventListener('DOMContentLoaded', function() {
        const chatWindow = document.getElementById('chat-window');
        chatWindow.scrollTop = chatWindow.scrollHeight;
    });
</script>
{% endblock %}
